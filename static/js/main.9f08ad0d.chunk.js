(this["webpackJsonpcowin-vaccination-slot-availability"]=this["webpackJsonpcowin-vaccination-slot-availability"]||[]).push([[0],{33:function(e,t,n){},34:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(13),s=n.n(i),o=(n(33),n.p,n(34),n(64)),r=n(8),l=n(9),d=n.n(l),u=n(70),j=n(65),b=n(66),m=n(69),h=n(67),p=n(68),g=n(1),O=function(){var e=Object(a.useRef)(null),t=Object(a.useState)({}),n=Object(r.a)(t,2),c=(n[0],n[1]),i=Object(a.useState)(null),s=Object(r.a)(i,2),o=(s[0],s[1],"79iF_2vuMet00mQO58c9OAyU1SaN4Gm9Ant2JL4fgSM"),l=function(e,t,n,a,c,i){d.a.get("https://revgeocode.search.hereapi.com/v1/revgeocode?at=".concat(e,"%2C").concat(t,"&lang=en-US&apiKey=").concat(o)).then((function(e){var t=e.data.items.map((function(e){return e.address.postalCode}))[0];t&&d.a.get("https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByPin?pincode=".concat(t,"&date=").concat(function(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),a=e.getFullYear();return"".concat(t,"-").concat(n,"-").concat(a)}())).then((function(e){var t,s=null===(t=e.data)||void 0===t?void 0:t.centers,o=new n.map.Group;s.forEach((function(e){var t=[e.name,e.address,e.block_name,e.district_name,e.state_name].join(",");c&&u(n,a,c,i,t,o)}))}))}))},u=function(e,t,n,a,c,i){var s={searchText:c,jsonattributes:1};n.getGeocodingService().geocode(s,(function(n){return function(e,t,n,a,c){var i=a.response.view[0].result;!function(e,t,n,a,c){var i,s;for(s=0;s<a.length;s+=1){i={lat:a[s].location.displayPosition.latitude,lng:a[s].location.displayPosition.longitude};var o=new e.map.Marker(i);o.label=a[s].location.address.label,c.addObject(o)}t.addObject(c),t.setCenter(c.getBounds().getCenter())}(e,t,0,i,c)}(e,t,0,n,i)}),j)};function j(e){alert("Ooops!")}var b={enableHighAccuracy:!0,timeout:5e3,maximumAge:0},m=function(e,t,n){var a=e.coords;c(a),console.log("Your current position is:"),console.log("Latitude : ".concat(a.latitude)),console.log("Longitude: ".concat(a.longitude)),console.log("More or less ".concat(a.accuracy," meters.")),p(t,n,a.latitude,a.longitude)},h=function(e){console.warn("ERROR(".concat(e.code,"): ").concat(e.message))},p=function(e,t,n,a,c,i){var s=new t.map.Marker({lat:n,lng:a});e.addObject(s),l(n,a,t,e,c,i)};return Object(a.useLayoutEffect)((function(){if(e.current){var t=window.H,n=new t.service.Platform({apikey:o}),a=n.createDefaultLayers(),c=new t.Map(e.current,a.vector.normal.map,{center:{lat:25,lng:78},zoom:4.5,pixelRatio:window.devicePixelRatio||1}),i=(new t.mapevents.Behavior(new t.mapevents.MapEvents(c)),t.ui.UI.createDefault(c,a,"de-DE")),s=i.getControl("mapsettings"),r=i.getControl("zoom"),l=i.getControl("scalebar");return s.setAlignment("top-left"),r.setAlignment("top-left"),l.setAlignment("top-left"),navigator.geolocation?navigator.permissions.query({name:"geolocation"}).then((function(e){"granted"===e.state||"prompt"===e.state?navigator.geolocation.getCurrentPosition((function(e){return m(e,c,t)}),h,b):e.state,e.onchange=function(){}})):alert("Sorry Not available!"),function(e,t,n,a){e.addEventListener("tap",(function(c){var i=e.screenToGeo(c.currentPointer.viewportX,c.currentPointer.viewportY);console.log("Clicked at "+Math.abs(i.lat.toFixed(4))+(i.lat>0?"N":"S")+" "+Math.abs(i.lng.toFixed(4))+(i.lng>0?"E":"W")),e.removeObjects(e.getObjects()),p(e,t,Math.abs(i.lat.toFixed(4)),Math.abs(i.lng.toFixed(4)),n,a)}))}(c,t,n,i),function(){c.dispose()}}}),[e]),Object(g.jsx)("div",{className:"map",ref:e,style:{height:"600px"}})},f=function(){var e=Object(a.useState)([]),t=Object(r.a)(e,2),n=t[0],i=t[1],s=Object(a.useState)([]),l=Object(r.a)(s,2),f=l[0],x=l[1],v=Object(a.useState)("Select state"),y=Object(r.a)(v,2),S=(y[0],y[1]),_=Object(a.useState)("Select state"),w=Object(r.a)(_,2),N=w[0],C=w[1],M=Object(a.useState)("Select district"),A=Object(r.a)(M,2),F=A[0],k=A[1],P=Object(a.useState)([]),D=Object(r.a)(P,2),E=D[0],T=D[1],L=Object(a.useState)([]),R=Object(r.a)(L,2),B=R[0],I=R[1],G=Object(a.useState)({}),J=Object(r.a)(G,2),K=J[0],Y=J[1];Object(a.useEffect)((function(){d.a.get("https://cdn-api.co-vin.in/api/v2/admin/location/states").then((function(e){return i(e.data.states)}))}),[]),Object(a.useEffect)((function(){console.log(K,"changed"),d.a.get("https://secure.geonames.org/findNearbyPostalCodesJSON?postalcode=".concat(K.pincode,"&country=IN&radius=10&username=irfangg&maxRows=500")).then((function(e){var t,n;return console.log(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.postalCodes)||void 0===n?void 0:n.map((function(e){return{postalCode:e.postalCode,adminName3:e.adminName3,placeName:e.placeName}})))}))}),[K]);var U=function(e){var t=n.find((function(t){return t.state_id==e}));S(t),C(t.state_name||"Try selecting different"),d.a.get("https://cdn-api.co-vin.in/api/v2/admin/location/districts/".concat(t.state_id)).then((function(e){return x(e.data.districts)}))},z=function(e){var t=f.find((function(t){return t.district_id==e}));k(t.district_name||"Try different"),d.a.get("https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id=".concat(t.district_id,"&date=").concat(function(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),a=e.getFullYear();return"".concat(t,"-").concat(n,"-").concat(a)}())).then((function(e){return I(e.data.centers),console.log(e.data.centers,e.data.centers.map((function(e){return"".concat(e.pincode,"-").concat(e.address)}))),T(e.data.centers.map((function(e){return{pincode:e.pincode,address:e.address,center_id:e.center_id}})))}))},H=function(e){var t=B.find((function(t){return t.center_id==e}));Y(t)},q=c.a.forwardRef((function(e,t){var n=e.children,i=e.style,s=e.className,o=e["aria-labelledby"],l=Object(a.useState)(""),d=Object(r.a)(l,2),j=d[0],b=d[1];return Object(g.jsxs)("div",{ref:t,style:i,className:s,"aria-labelledby":o,children:[Object(g.jsx)(u.a,{autoFocus:!0,className:"mx-3 my-2 w-auto",placeholder:"Type to filter...",onChange:function(e){return b(e.target.value)},value:j}),Object(g.jsx)("ul",{className:"list-unstyled",children:c.a.Children.toArray(n).filter((function(e){return!j||-1!==e.props.children.toLowerCase().indexOf(j)}))})]})}));return Object(g.jsxs)(o.a,{fluid:!0,children:[Object(g.jsx)(j.a,{className:"mt-2",children:"Dashboard"}),Object(g.jsxs)(j.a,{className:"mt-2 mb-2",children:[Object(g.jsx)(b.a,{xl:4,lg:4,md:4,sm:12,xs:12,className:"mb-2",children:n.length?Object(g.jsxs)(m.a,{as:h.a,children:[Object(g.jsx)(m.a.Toggle,{id:"dropdown-custom-1",children:N}),Object(g.jsx)(m.a.Menu,{as:q,children:n.map((function(e,t){return Object(g.jsx)(m.a.Item,{eventKey:e.state_id,onSelect:U,children:e.state_name},e.state_id)}))})]}):null}),Object(g.jsx)(b.a,{xl:4,lg:4,md:4,sm:12,xs:12,className:"mb-2",children:f.length?Object(g.jsxs)(m.a,{as:h.a,children:[Object(g.jsx)(m.a.Toggle,{id:"dropdown-custom-1",children:F}),Object(g.jsx)(m.a.Menu,{as:q,children:f.map((function(e,t){return Object(g.jsx)(m.a.Item,{eventKey:e.district_id,onSelect:z,children:e.district_name},e.district_id)}))})]}):null}),Object(g.jsx)(b.a,{xl:4,lg:4,md:4,sm:12,xs:12,children:E.length?Object(g.jsxs)(m.a,{as:h.a,children:[Object(g.jsx)(m.a.Toggle,{id:"dropdown-custom-1",children:"Pincode"}),Object(g.jsx)(m.a.Menu,{as:q,children:E.map((function(e,t){return Object(g.jsx)(m.a.Item,{eventKey:e.center_id,onSelect:H,children:"".concat(e.pincode,"-").concat(e.address)},t)}))})]}):null})]}),0!==Object.keys(K).length?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsxs)(j.a,{className:"mt-2",children:[Object(g.jsxs)(b.a,{xl:3,lg:3,md:6,sm:6,xs:12,children:["Address: ",K.address]}),Object(g.jsxs)(b.a,{xl:3,lg:3,md:6,sm:6,xs:12,children:["Block name: ",K.block_name]}),Object(g.jsxs)(b.a,{xl:3,lg:3,md:6,sm:6,xs:12,children:["vaccine fee: ",K.fee_type]}),Object(g.jsxs)(b.a,{xl:3,lg:3,md:6,sm:6,xs:12,children:["Center name: ",K.name]})]}),Object(g.jsx)(j.a,{className:"mt-2",children:Object(g.jsx)(b.a,{xs:12,children:Object(g.jsxs)(p.a,{responsive:!0,striped:!0,bordered:!0,hover:!0,variant:"dark",children:[Object(g.jsx)("thead",{children:Object(g.jsxs)("tr",{children:[Object(g.jsx)("th",{children:"Date"}),Object(g.jsx)("th",{children:"Available capacity"}),Object(g.jsx)("th",{children:"Min age limit"}),Object(g.jsx)("th",{children:"vaccine"}),Object(g.jsx)("th",{children:"slots"}),Object(g.jsx)("th",{children:"Available dose1"}),Object(g.jsx)("th",{children:"Available dose2"})]})}),Object(g.jsx)("tbody",{children:K.sessions.map((function(e){var t=e.date,n=e.available_capacity,a=e.available_capacity_dose1,c=e.available_capacity_dose2,i=e.min_age_limit,s=e.vaccine,o=e.slots;return Object(g.jsxs)("tr",{children:[Object(g.jsx)("td",{children:t}),Object(g.jsx)("td",{children:n}),Object(g.jsx)("td",{children:i}),Object(g.jsx)("td",{children:s}),Object(g.jsx)("td",{children:o.map((function(e){return Object(g.jsx)("div",{children:e})}))}),Object(g.jsx)("td",{children:a}),Object(g.jsx)("td",{children:c})]})}))})]})})})]}):null,Object(g.jsxs)(j.a,{children:[Object(g.jsx)(b.a,{xs:12,className:"mb-2",children:Object(g.jsx)("div",{children:"Note: Map work is still in progress"})}),Object(g.jsx)(b.a,{xs:12,children:Object(g.jsx)(O,{})})]})]})};var x=function(){return Object(g.jsx)(o.a,{fluid:!0,className:"App",children:Object(g.jsx)(f,{})})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),i(e),s(e)}))};n(59);s.a.render(Object(g.jsx)(c.a.StrictMode,{children:Object(g.jsx)(x,{})}),document.getElementById("root")),v()}},[[60,1,2]]]);
//# sourceMappingURL=main.9f08ad0d.chunk.js.map